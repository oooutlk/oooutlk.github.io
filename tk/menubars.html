<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Menubars</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="installing_tk.html"><strong aria-hidden="true">2.</strong> Installing Tk</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="installing_tk_on_windows.html"><strong aria-hidden="true">2.1.</strong> Installing Tk On Windows</a></li><li class="chapter-item expanded "><a href="installing_tk_on_linux.html"><strong aria-hidden="true">2.2.</strong> Installing Tk On Linux</a></li><li class="chapter-item expanded "><a href="installing_tk_on_freebsd.html"><strong aria-hidden="true">2.3.</strong> Installing Tk On FreeBSD</a></li></ol></li><li class="chapter-item expanded "><a href="a_first_real_example.html"><strong aria-hidden="true">3.</strong> A First (Real) Example</a></li><li class="chapter-item expanded "><a href="tk_concepts.html"><strong aria-hidden="true">4.</strong> Tk Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="widgets.html"><strong aria-hidden="true">4.1.</strong> Widgets</a></li><li class="chapter-item expanded "><a href="geometry_management.html"><strong aria-hidden="true">4.2.</strong> Geometry Management</a></li><li class="chapter-item expanded "><a href="event_handling.html"><strong aria-hidden="true">4.3.</strong> Event Handling</a></li></ol></li><li class="chapter-item expanded "><a href="basic_widgets.html"><strong aria-hidden="true">5.</strong> Basic Widgets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="frame.html"><strong aria-hidden="true">5.1.</strong> Frame</a></li><li class="chapter-item expanded "><a href="label.html"><strong aria-hidden="true">5.2.</strong> Label</a></li><li class="chapter-item expanded "><a href="button.html"><strong aria-hidden="true">5.3.</strong> Button</a></li><li class="chapter-item expanded "><a href="checkbutton.html"><strong aria-hidden="true">5.4.</strong> Checkbutton</a></li><li class="chapter-item expanded "><a href="radiobutton.html"><strong aria-hidden="true">5.5.</strong> Radiobutton</a></li><li class="chapter-item expanded "><a href="entry.html"><strong aria-hidden="true">5.6.</strong> Entry</a></li><li class="chapter-item expanded "><a href="combobox.html"><strong aria-hidden="true">5.7.</strong> Combobox</a></li></ol></li><li class="chapter-item expanded "><a href="grid.html"><strong aria-hidden="true">6.</strong> The Grid Geometry Manager</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="columns_and_rows.html"><strong aria-hidden="true">6.1.</strong> Columns and Rows</a></li><li class="chapter-item expanded "><a href="spanning_multiple_cells.html"><strong aria-hidden="true">6.2.</strong> Spanning Multiple Cells</a></li><li class="chapter-item expanded "><a href="layout_within_the_cell.html"><strong aria-hidden="true">6.3.</strong> Layout within the Cell</a></li><li class="chapter-item expanded "><a href="handling_resize.html"><strong aria-hidden="true">6.4.</strong> Handling Resize</a></li><li class="chapter-item expanded "><a href="padding.html"><strong aria-hidden="true">6.5.</strong> Padding</a></li><li class="chapter-item expanded "><a href="additional_grid_features.html"><strong aria-hidden="true">6.6.</strong> Additional Grid Features</a></li><li class="chapter-item expanded "><a href="nested_layouts.html"><strong aria-hidden="true">6.7.</strong> Nested Layouts</a></li></ol></li><li class="chapter-item expanded "><a href="more_widgets.html"><strong aria-hidden="true">7.</strong> More Widgets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="listbox.html"><strong aria-hidden="true">7.1.</strong> Listbox</a></li><li class="chapter-item expanded "><a href="scrollbar.html"><strong aria-hidden="true">7.2.</strong> Scrollbar</a></li><li class="chapter-item expanded "><a href="text.html"><strong aria-hidden="true">7.3.</strong> Text</a></li><li class="chapter-item expanded "><a href="scale.html"><strong aria-hidden="true">7.4.</strong> Scale</a></li><li class="chapter-item expanded "><a href="spinbox.html"><strong aria-hidden="true">7.5.</strong> Spinbox</a></li><li class="chapter-item expanded "><a href="progressbar.html"><strong aria-hidden="true">7.6.</strong> Progressbar</a></li></ol></li><li class="chapter-item expanded "><a href="event_loop.html"><strong aria-hidden="true">8.</strong> Event Loop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="blocking_the_event_loop.html"><strong aria-hidden="true">8.1.</strong> Blocking the Event Loop</a></li><li class="chapter-item expanded "><a href="one_step_at_a_time.html"><strong aria-hidden="true">8.2.</strong> One Step at a Time</a></li><li class="chapter-item expanded "><a href="asynchronous_io.html"><strong aria-hidden="true">8.3.</strong> Asynchronous I/O</a></li><li class="chapter-item expanded "><a href="threads_or_processes.html"><strong aria-hidden="true">8.4.</strong> Threads or Processes</a></li><li class="chapter-item expanded "><a href="nested_event_processing.html"><strong aria-hidden="true">8.5.</strong> Nested Event Processing</a></li></ol></li><li class="chapter-item expanded "><a href="menus.html"><strong aria-hidden="true">9.</strong> Menus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="menubars.html" class="active"><strong aria-hidden="true">9.1.</strong> Menubars</a></li><li class="chapter-item expanded "><a href="platform_menus.html"><strong aria-hidden="true">9.2.</strong> Platform Menus</a></li><li class="chapter-item expanded "><a href="contextual_menus.html"><strong aria-hidden="true">9.3.</strong> Contextual Menus</a></li></ol></li><li class="chapter-item expanded "><a href="windows_and_dialogs.html"><strong aria-hidden="true">10.</strong> Windows and Dialogs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="creating_and_destroying_windows.html"><strong aria-hidden="true">10.1.</strong> Creating and Destroying Windows</a></li><li class="chapter-item expanded "><a href="window_behavior_and_styles.html"><strong aria-hidden="true">10.2.</strong> Window Behavior and Styles</a></li><li class="chapter-item expanded "><a href="dialog_windows.html"><strong aria-hidden="true">10.3.</strong> Dialog Windows</a></li></ol></li><li class="chapter-item expanded "><a href="organizing_complex_interfaces.html"><strong aria-hidden="true">11.</strong> Organizing Complex Interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="separator.html"><strong aria-hidden="true">11.1.</strong> Separator</a></li><li class="chapter-item expanded "><a href="label_frames.html"><strong aria-hidden="true">11.2.</strong> Label Frames</a></li><li class="chapter-item expanded "><a href="paned_windows.html"><strong aria-hidden="true">11.3.</strong> Paned Windows</a></li><li class="chapter-item expanded "><a href="notebook.html"><strong aria-hidden="true">11.4.</strong> Notebook</a></li></ol></li><li class="chapter-item expanded "><a href="fonts_colors_images.html"><strong aria-hidden="true">12.</strong> Fonts, Colors, Images</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fonts.html"><strong aria-hidden="true">12.1.</strong> Fonts</a></li><li class="chapter-item expanded "><a href="colors.html"><strong aria-hidden="true">12.2.</strong> Colors</a></li><li class="chapter-item expanded "><a href="images.html"><strong aria-hidden="true">12.3.</strong> Images</a></li></ol></li><li class="chapter-item expanded "><a href="canvas.html"><strong aria-hidden="true">13.</strong> Canvas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="creating_items.html"><strong aria-hidden="true">13.1.</strong> Creating Items</a></li><li class="chapter-item expanded "><a href="event_bindings.html"><strong aria-hidden="true">13.2.</strong> Event Bindings</a></li><li class="chapter-item expanded "><a href="tags.html"><strong aria-hidden="true">13.3.</strong> Tags</a></li><li class="chapter-item expanded "><a href="scrolling.html"><strong aria-hidden="true">13.4.</strong> Scrolling</a></li></ol></li><li class="chapter-item expanded "><a href="text_chapter.html"><strong aria-hidden="true">14.</strong> Text</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="the_basics.html"><strong aria-hidden="true">14.1.</strong> The Basics</a></li><li class="chapter-item expanded "><a href="modifying_the_text_in_code.html"><strong aria-hidden="true">14.2.</strong> Modifying the Text in Code</a></li><li class="chapter-item expanded "><a href="formatting_with_tags.html"><strong aria-hidden="true">14.3.</strong> Formatting with Tags</a></li><li class="chapter-item expanded "><a href="events_and_bindings.html"><strong aria-hidden="true">14.4.</strong> Events and Bindings</a></li><li class="chapter-item expanded "><a href="selecting_text.html"><strong aria-hidden="true">14.5.</strong> Selecting Text</a></li><li class="chapter-item expanded "><a href="marks.html"><strong aria-hidden="true">14.6.</strong> Marks</a></li><li class="chapter-item expanded "><a href="images_and_widgets.html"><strong aria-hidden="true">14.7.</strong> Images and Widgets</a></li><li class="chapter-item expanded "><a href="even_more.html"><strong aria-hidden="true">14.8.</strong> Even More</a></li></ol></li><li class="chapter-item expanded "><a href="treeview.html"><strong aria-hidden="true">15.</strong> Treeview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="adding_items_to_the_tree.html"><strong aria-hidden="true">15.1.</strong> Adding Items to the Tree</a></li><li class="chapter-item expanded "><a href="rearranging_items.html"><strong aria-hidden="true">15.2.</strong> Rearranging Items</a></li><li class="chapter-item expanded "><a href="displaying_information_for_each_item.html"><strong aria-hidden="true">15.3.</strong> Displaying Information for each Item</a></li><li class="chapter-item expanded "><a href="item_appearance_and_events.html"><strong aria-hidden="true">15.4.</strong> Item Appearance and Events</a></li><li class="chapter-item expanded "><a href="customizing_the_display.html"><strong aria-hidden="true">15.5.</strong> Customizing the Display</a></li></ol></li><li class="chapter-item expanded "><a href="styles_and_themes.html"><strong aria-hidden="true">16.</strong> Styles and Themes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="using_existing_themes.html"><strong aria-hidden="true">16.1.</strong> Using Existing Themes</a></li><li class="chapter-item expanded "><a href="using_styles.html"><strong aria-hidden="true">16.2.</strong> Using Styles</a></li><li class="chapter-item expanded "><a href="whats_inside_a_style.html"><strong aria-hidden="true">16.3.</strong> What's Inside a Style?</a></li><li class="chapter-item expanded "><a href="manipulating_styles.html"><strong aria-hidden="true">16.4.</strong> Manipulating Styles</a></li><li class="chapter-item expanded "><a href="sound_difficult_to_you.html"><strong aria-hidden="true">16.5.</strong> Sound Difficult to you?</a></li><li class="chapter-item expanded "><a href="advanced_more_on_elements.html"><strong aria-hidden="true">16.6.</strong> Advanced: More on Elements</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="menubars"><a class="header" href="#menubars">Menubars</a></h1>
<p>In this section, we'll look at menubars: how to create them, what goes in them,
how they're used, etc.</p>
<p>Properly designing a menubar and its set of menus is beyond the scope of this
tutorial. However, if you're creating an application for someone other than
yourself, here is a bit of advice. First, if you find yourself with many menus,
very long menus, or deeply nested menus, you may need to rethink how your user
interface is organized. Second, many people use the menus to explore what the
program can do, particularly when they're first learning it, so try to ensure
major features are accessible by the menus. Finally, for each platform you're
targeting, become familiar with how applications use menus, and consult the
platform's human interface guidelines for full details about design,
terminology, shortcuts, and much more. This is an area you will likely have to
customize for each platform.</p>
<table><thead><tr><th style="text-align: center">Menubars</th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="./images/menubar_all.png" alt="Menubars." /></td></tr>
</tbody></table>
<blockquote>
<p>You'll notice on some recent Linux distributions that many applications show
their menus at the top of the screen when active, rather than in the window
itself. Tk does not yet support this style of menus.</p>
</blockquote>
<h2 id="menu-widgets-and-hierarchy"><a class="header" href="#menu-widgets-and-hierarchy">Menu Widgets and Hierarchy</a></h2>
<p>Menus are implemented as widgets in Tk, just like buttons and entries. Each menu
widget consists of a number of different items in the menu. Items have various
attributes, such as the text to display for the item, a keyboard accelerator,
and a command to invoke.</p>
<p>Menus are arranged in a hierarchy. The menubar is itself a menu widget. It has
several items (&quot;File,&quot; &quot;Edit,&quot; etc.), each of which is a submenu containing more
items. These items can include things like the &quot;Open...&quot; command in a &quot;File&quot;
menu, but also separators between other items. It can even have items that open
up their own submenu (so-called cascading menus). As you'd expect from other
things you've seen already in Tk, anytime you have a submenu, it must be created
as a child of its parent menu.</p>
<p>Menus are part of the classic Tk widgets; there is not presently a menu in the
themed Tk widget set.Menus are implemented as widgets in Tk, just like buttons
and entries. Each menu widget consists of a number of different items in the
menu. Items have various attributes, such as the text to display for the item, a
keyboard accelerator, and a command to invoke.</p>
<p>Menus are arranged in a hierarchy. The menubar is itself a menu widget. It has
several items (&quot;File,&quot; &quot;Edit,&quot; etc.), each of which is a submenu containing more
items. These items can include things like the &quot;Open...&quot; command in a &quot;File&quot;
menu, but also separators between other items. It can even have items that open
up their own submenu (so-called cascading menus). As you'd expect from other
things you've seen already in Tk, anytime you have a submenu, it must be created
as a child of its parent menu.</p>
<p>Menus are part of the classic Tk widgets; there is not presently a menu in the
themed Tk widget set.</p>
<h2 id="before-you-start"><a class="header" href="#before-you-start">Before you Start</a></h2>
<p>It's essential to put the following line in your application somewhere before
you start creating menus.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>tk.option_add( &quot;*tearOff&quot;, 0 )?;
<span class="boring">}
</span></code></pre></pre>
<p>Without it, each of your menus (on Windows and X11) will start with what looks
like a dashed line and allows you to &quot;tear off&quot; the menu, so it appears in its
own window. You should eliminate tear-off menus from your application as they're
not a part of any modern user interface style.</p>
<blockquote>
<p>This is a throw-back to the Motif-style X11 that Tk's original look and feel
were based on. Get rid of them unless your application is designed to run only
on that old box collecting dust in the basement. We'll all look forward to a
future version of Tk where this misguided paean to backward compatibility is
removed.</p>
</blockquote>
<blockquote>
<p>While on the topic of ancient history, the <code>option_add</code> bit uses the option
database. On X11 systems, this provided a standardized way to customize certain
elements of user interfaces through text-based configuration files.  It's no
longer used today. Older Tk programs may use the <code>option</code> command internally to
separate style configuration options from widget creation code.  This all
pre-dated themed Tk styles, which should be used for that purpose today.
However, it's somehow fitting to use the obsolete option database to
automatically remove the obsolete tear-off menus.</p>
</blockquote>
<h2 id="creating-a-menubar"><a class="header" href="#creating-a-menubar">Creating a Menubar</a></h2>
<p>In Tk, menubars are associated with individual windows; each toplevel window can
have at most one menubar. On Windows and many X11 window managers, this is
visually obvious, as the menus are part of each window, sitting just below the
title bar at the top.</p>
<p>On macOS, though, there is a single menubar along the top of the screen, shared
by each window. As far as your Tk program is concerned, each window still does
have its own menubar. As you switch between windows, Tk ensures that the correct
menubar is displayed. If you don't specify a menubar for a particular window, Tk
will use the menubar associated with the root window; you'll have noticed by now
that this is automatically created for you when your Tk application starts.</p>
<blockquote>
<p>Because all windows have a menubar on macOS, it's important to define one,
either for each window or a fallback menubar for the root window. Otherwise,
you'll end up with the &quot;built-in&quot; menubar, which contains menus that are only
intended for typing commands directly into the interpreter.Because all windows
have a menubar on macOS, it's important to define one, either for each window or
a fallback menubar for the root window. Otherwise, you'll end up with the
&quot;built-in&quot; menubar, which contains menus that are only intended for typing
commands directly into the interpreter.</p>
</blockquote>
<p>To create a menubar for a window, first, create a menu widget. Then, use the
window's <code>menu</code> configuration option to attach the menu widget to the window.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let win = root.add_toplevel(())?;
let menubar = win.add_menu(())?;
win.configure( -menu(menubar) )?;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>You can use the same menubar for more than one window. In other words, you can
specify the same menubar as the <code>menu</code> configuration option for several toplevel
windows. This is particularly useful on Windows and X11, where you may want a
window to include a menu, but don't necessarily need to juggle different menus
in your application. However, if the contents or state of menu items depends on
what's going on in the active window, you'll have to manage this yourself.</p>
</blockquote>
<blockquote>
<p>This is truly ancient history, but menubars used to be implemented by creating
a frame widget containing the menu items and packing it into the top of the
window like any other widget. Hopefully, you don't have any code or
documentation that still does this.</p>
</blockquote>
<h2 id="adding-menus"><a class="header" href="#adding-menus">Adding Menus</a></h2>
<p>We now have a menubar, but that's pretty useless without some menus to go in it.
So again, we'll create a menu widget for each menu, each one a child of the
menubar. We'll then add them all to the menubar.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let menu_file = menubar.add_menu(())?;
let menu_edit = menubar.add_menu(())?;
menubar.add_cascade( -menu(menu_file) -label(&quot;File&quot;) )?;
menubar.add_cascade( -menu(menu_edit) -label(&quot;Edit&quot;) )?;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>The <code>add_cascade</code> method adds a menu item, which itself is a menu (a submenu).</p>
</blockquote>
<h2 id="adding-menu-items"><a class="header" href="#adding-menu-items">Adding Menu Items</a></h2>
<p>Now that we have a couple of menus in our menubar, we can add a few items to
each menu.</p>
<h3 id="command-items"><a class="header" href="#command-items">Command Items</a></h3>
<p>Regular menu items are called <code>command</code> items in Tk. We'll see some other types
of menu items shortly. Notice that menu items are part of the menu itself; we
don't have to create a separate menu widget for each one (submenus being the
exception).</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>menu_file.add_command( -label(&quot;New&quot;)     -command(&quot;newFile&quot;)   )?;
menu_file.add_command( -label(&quot;Open...&quot;) -command(&quot;openFile&quot;)  )?;
menu_file.add_command( -label(&quot;Close&quot;)   -command(&quot;closeFile&quot;) )?;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>On macOS, the ellipsis (&quot;...&quot;) is actually a special character, more tightly
spaced than three periods in a row. Tk takes care of substituting this character
for you automatically.</p>
</blockquote>
<p>Each menu item has associated with it several configuration options, analogous
to widget configuration options. Each type of menu item has a different set of
available options. Cascade menu items have a <code>menu</code> option used to specify the
submenu, command menu items have a <code>command</code> option to specify the command to
invoke when the item is chosen. Both have a <code>label</code> option to specify the text
to display for the item.</p>
<h3 id="submenus"><a class="header" href="#submenus">Submenus</a></h3>
<p>We've already seen <code>cascade</code> menu items used to add a menu to a menubar. Not
surprisingly, if you want to add a submenu to an existing menu, you also use a
<code>cascade</code> menu item in exactly the same way. You might use this to build a
&quot;recent files&quot; submenu, for example.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let menu_recent = menu_file.add_menu(())?;
menu_file.add_cascade( -menu(menu_recent) -label(&quot;Open Recent&quot;) )?;
for f in recent_files {
    let f = PathBuf::from(f);
    if let Some( file_name ) = f.file_name() {
        menu_recent.add_command(
            -label( file_name.to_str() )
            -command(( &quot;openFile&quot;, f ))
        )?;
    }
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="separators"><a class="header" href="#separators">Separators</a></h3>
<p>A third type of menu item is the <code>separator</code>, which produces the dividing line
you often see between different menu items.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>menu_file.add_separator(())?;
<span class="boring">}
</span></code></pre></pre>
<h3 id="checkbutton-and-radiobutton-items"><a class="header" href="#checkbutton-and-radiobutton-items">Checkbutton and Radiobutton Items</a></h3>
<p>Finally, there are also <code>checkbutton</code> and <code>radiobutton</code> menu items that behave
analogously to checkbutton and radiobutton widgets. These menu items have a
variable associated with them. Depending on its value, an indicator (i.e.,
checkmark or selected radiobutton) may be shown next to its label.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>menu_file.add_checkbutton( -label(&quot;Check&quot;) -variable(&quot;check&quot;) -onvalue(1) -offvalue(0) )?;
menu_file.add_radiobutton( -label(&quot;One&quot;)   -variable(&quot;radio&quot;) -value(1) )?;
menu_file.add_radiobutton( -label(&quot;Two&quot;)   -variable(&quot;radio&quot;) -value(2) )?;
<span class="boring">}
</span></code></pre></pre>
<p>When a user selects a checkbutton item that is not already checked, it sets the
associated variable to the value in <code>onvalue</code>. Selecting an item that is already
checked sets it to the value in <code>offvalue</code>. Selecting a radiobutton item sets
the associated variable to the value in <code>value</code>. Both types of items also react
to any changes you make to the associated variable.</p>
<p>Like command items, checkbutton and radiobutton menu items support a <code>command</code>
configuration option that is invoked when the menu item is chosen. The
associated variable and the menu item's state are updated before the callback is
invoked.</p>
<blockquote>
<p>Radiobutton menu items are not part of the Windows or macOS human interface
guidelines. On those platforms, the item's indicator is a checkmark, as it would
be for a checkbutton item. The semantics still work. It's a good way to select
between multiple items since it will show one of them selected (checked).</p>
</blockquote>
<h2 id="manipulating-menu-items"><a class="header" href="#manipulating-menu-items">Manipulating Menu Items</a></h2>
<p>As well as adding items to the end of menus, you can also insert them in the
middle of menus via the <code>insert_{type}( index, opts )</code> method; here index is the
position (0..n-1) of the item you want to insert before. You can also delete one
or more menu items susing the <code>delete( index )</code> or <code>delete_range( index )</code>
methods.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>menu_recent.delete_range( 0.. )?;
<span class="boring">}
</span></code></pre></pre>
<p>Like most everything in Tk, you can look at or change the value of an item's
options at any time. Items are referred to via an index. Usually, this is a
number (0..n-1) indicating the item's position in the menu. You can also specify
the label of the menu item (or, in fact, a &quot;glob-style&quot; pattern to match against
the item's label).</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!( &quot;{}&quot;, menu_file.entrycget( 0, label )? ); // get label of top entry in menu
println!( &quot;{}&quot;, menu_file.entryconfigure_options(0)? ); // show all options for an item
<span class="boring">}
</span></code></pre></pre>
<h3 id="state"><a class="header" href="#state">State</a></h3>
<p>You can disable a menu item so that users cannot select it. This can be done via
the <code>state</code> option, setting it to the value <code>disabled</code>. Use a value of <code>normal</code>
to re-enable the item.</p>
<p>Menus should always reflect the current state of your application. If a menu
item is not presently relevant (e.g., the &quot;Copy&quot; item is only applicable if
something in your application is selected), you should disable it. When your
application state changes so that the item is applicable, make sure to enable
it.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>menu_file.entryconfigure( menu::Index::pattern(&quot;Close&quot;) -state(&quot;disabled&quot;) )?;
<span class="boring">}
</span></code></pre></pre>
<p>Sometimes you may have menu items whose name changes in response to application
state changes, rather than the menu item being disabled. For example, A web
browser might have a menu item that changes between &quot;Show Bookmarks&quot; and &quot;Hide
Bookmarks&quot; as a bookmarks pane is hidden or displayed.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>bookmarks.entryconfigure( 3, -label(&quot;Hide Bookmarks&quot;) )?;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>As your program grows complex, it's easy to miss enabling or disabling some
items. One strategy is to centralize all the menu state changes in one routine.
Whenever there is a state change in your application, it should call this
routine. It will examine the current state and update menus accordingly. The
same code can also handle toolbars, status bars, or other user interface
components.</p>
</blockquote>
<h3 id="accelerator-keys"><a class="header" href="#accelerator-keys">Accelerator Keys</a></h3>
<p>The <code>accelerator</code> option is used to indicate a keyboard equivalent that
corresponds to a menu item. This does not actually create the accelerator, but
only displays it next to the menu item. You still need to create an event
binding for the accelerator yourself.</p>
<blockquote>
<p>Remember that event bindings can be set on individual widgets, all widgets of
a certain type, the toplevel window containing the widget you're interested in,
or the application as a whole. As menu bars are associated with individual
windows, the event bindings you create will usually be on the toplevel window
the menu is associated with.</p>
</blockquote>
<p>Accelerators are very platform-specific, not only in terms of which keys are
used for what operation, but what modifier keys are used for menu accelerators
(e.g., on macOS, it is the &quot;Command&quot; key, on Windows and X11, it is usually the
&quot;Control&quot; key). Examples of valid accelerator options are <code>Command-N</code>,
<code>Shift+Ctrl+X</code>, and <code>Command-Option-B</code>. Commonly used modifiers include
<code>Control</code>, <code>Ctrl</code>, <code>Option</code>, <code>Opt</code>, <code>Alt</code>, <code>Shift</code>, &quot;<code>Command</code>, <code>Cmd</code>, and
<code>Meta</code>.</p>
<blockquote>
<p>On macOS, modifier names are automatically mapped to the different modifier
icons that appear in menus, i.e., <code>Shift</code> ⇒ ⇧, <code>Command</code> ⇒ ⌘, <code>Control</code> ⇒ ⌃, and
<code>Option</code> ⇒ ⌥.</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>edit.entryconfigure( menu::Index::pattern(&quot;Paste&quot;), -accelerator(&quot;Command+V&quot;) )?;
<span class="boring">}
</span></code></pre></pre>
<h3 id="underline"><a class="header" href="#underline">Underline</a></h3>
<p>All platforms support keyboard traversal of the menubar via the arrow keys. On
Windows and X11, you can also use other keys to jump to particular menus or menu
items. The keys that trigger these jumps are indicated by an underlined letter
in the menu item's label. To add one of these to a menu item, use the
<code>underline</code> configuration option for the item. Its value should be the index of
the character you'd like underlined (from 0 to the length of the string - 1).
Unlike with accelerator keys, the menu will watch for the keystroke, so no
separate event binding is needed.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>menubar.add_command( -label(&quot;Path Browser&quot;) -underline(5) )?; // underline &quot;B&quot;
<span class="boring">}
</span></code></pre></pre>
<h3 id="images"><a class="header" href="#images">Images</a></h3>
<p>It is also possible to use images in menu items, either beside the menu item's
label, or replacing it altogether. To do this, use the <code>image</code> and <code>compound</code>
options, which work just like in label widgets. The value for <code>image</code> must be a
Tk image object, while <code>compound</code> can have the values <code>bottom</code>, <code>center</code>,
<code>left</code>, <code>right</code>, <code>top</code>, or <code>none</code>.</p>
<h2 id="menu-virtual-events"><a class="header" href="#menu-virtual-events">Menu Virtual Events</a></h2>
<p>Platform conventions for menus suggest standard menus and items that should be
available in most applications. For example, most applications have an &quot;Edit&quot;
menu, with menu items for &quot;Copy,&quot; &quot;Paste,&quot; etc. Tk widgets like entry or text
will react appropriately when those menu items are chosen. But if you're
building your own menus, how do you make that work? What <code>command</code> would you
assign to a &quot;Copy&quot; menu item?</p>
<p>Tk handles this with virtual events. As you'll recall from the Tk Concepts
chapter, these are high-level application events, as opposed to low-level
operating system events. Tk's widgets will watch for specific events. When you
build your menus, you can generate those events rather than directly invoking a
callback function. Your application can create event bindings to watch for those
events too.</p>
<blockquote>
<p>Some developers create virtual events for every item in their menus. They
generate those events instead of calling routines in their own code directly.
It's one way of splitting off your user interface code from the rest of your
application. Remember that even if you do this, you'll still need code that
enables and disables menu items, adjusts their labels, etc. in response to
application state changes.</p>
</blockquote>
<p>Here's a minimal example showing how we'd add two items to an &quot;Edit&quot; menu, the
standard &quot;Paste&quot; item, and an application-specific &quot;Find...&quot; item that will open
a dialog to find or search for something. We'll include an entry widget so that
we can check that &quot;Paste&quot; works.</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let _e = root.add_ttk_entry(())?;
let m = root.add_menu(())?;
let m_edit = m.add_menu( &quot;edit&quot; )?;
m.add_cascade( -menu(m_edit) -label(&quot;Edit&quot;) )?;
m_edit.add_command( -label(&quot;Paste&quot;)
    -command( tclosure!( tk, || -&gt; TkResult&lt;()&gt; {
        Ok( tk.focus()?.event_generate( event::virtual_event(&quot;Paste&quot;), () )? )})))?;
m_edit.add_command( -label(&quot;Find...&quot;)
    -command( tclosure!( tk, || -&gt; TkResult&lt;()&gt; {
        Ok( root.event_generate( event::virtual_event(&quot;OpenFindDialog&quot;), () )? )})))?;
root.configure( -menu(m) )?;

root.bind( event::virtual_event(&quot;OpenFindDialog&quot;), tclosure!( tk, || -&gt; TkResult&lt;String&gt; {
    Ok( tk.message_box( -message(&quot;I hope you find what you're looking for!&quot;) )? )
}))?;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>When you generate a virtual event, you need to specify the widget that the
event should be sent to. We want the &quot;Paste&quot; event to be sent to the widget with
the keyboard focus (usually indicated by a focus ring). You can determine which
widget has the keyboard focus using the <code>focus</code> command. Try it out, choosing
the Paste item when the window is first opened (when there's no focus) and after
clicking on the entry (making it the focus). Notice the entry handles the
<code>event::virtual_event(&quot;Paste&quot;)</code> itself. There's no need for us to create an
event binding.</p>
</blockquote>
<blockquote>
<p>The <code>event::virtual_event(&quot;OpenFindDialog&quot;)</code> event is sent to the root window,
which is where we create an event binding. If we had multiple toplevel windows,
we'd send it to a specific window.</p>
</blockquote>
<p>Tk predefines the following virtual events:</p>
<ul>
<li><code>event::virtual_event(&quot;Clear&quot;)</code></li>
<li><code>event::virtual_event(&quot;Copy&quot;)</code></li>
<li><code>event::virtual_event(&quot;Cut&quot;)</code></li>
<li><code>event::virtual_event(&quot;Paste&quot;)</code></li>
<li><code>event::virtual_event(&quot;PasteSelection&quot;)</code></li>
<li><code>event::virtual_event(&quot;PrevWindow&quot;)</code></li>
<li><code>event::virtual_event(&quot;Redo&quot;)</code></li>
<li><code>event::virtual_event(&quot;Undo&quot;)</code>.</li>
</ul>
<p>For additional information, see the <code>event</code> mod.</p>
<h2 id="construct-all-menus-in-one-statement"><a class="header" href="#construct-all-menus-in-one-statement">Construct all menus in one statement</a></h2>
<p>The tk crate provides <code>add_menus()</code>, a convenient API to construct all menus in
one place:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let win = root.add_toplevel(())?;
let created_widgets = win.add_menus( &quot;menubar&quot;
    -menu::cascade( &quot;file&quot; -label(&quot;File&quot;)
        -menu::command( -label(&quot;New&quot;)       -command(&quot;newFile&quot;) )
        -menu::command( -label(&quot;Open...&quot;)   -command(&quot;openFile&quot;) )
        -menu::command( -label(&quot;Close&quot;)     -command(&quot;closeFile&quot;) )
        -menu::cascade( &quot;recent&quot; -label(&quot;Open Recent&quot;) )
        -menu::separator( no_arg() )
        -menu::checkbutton( -label(&quot;Check&quot;) -variable(&quot;check&quot;) -onvalue(1) -offvalue(0) )
        -menu::radiobutton( -label(&quot;One&quot;)   -variable(&quot;radio&quot;) -value(1) )
        -menu::radiobutton( -label(&quot;Two&quot;)   -variable(&quot;radio&quot;) -value(2) )
    )
)?;
<span class="boring">}
</span></code></pre></pre>
<p>See <code>add_menus</code> example for more.</p>
<h2 id="run-example"><a class="header" href="#run-example">Run Example</a></h2>
<p><code>cargo run --example menu</code></p>
<p><code>cargo run --example add_menus</code></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="menus.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="platform_menus.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="menus.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="platform_menus.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
